
////////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2018, ESI Group
//  All rights reserved.
//
//  Author: Perry L Miller IV
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
//
//  Function(s) for getting or creating properties.
//
////////////////////////////////////////////////////////////////////////////////

"use strict";


////////////////////////////////////////////////////////////////////////////////
//
//  The default error handler.
//
////////////////////////////////////////////////////////////////////////////////

const defaultErrorHandler = function ( message )
{
  throw new Error ( message );
};


////////////////////////////////////////////////////////////////////////////////
//
//  The current error handler.
//
////////////////////////////////////////////////////////////////////////////////

let currentErrorHandler = defaultErrorHandler;


////////////////////////////////////////////////////////////////////////////////
//
//  Call the error handler.
//
////////////////////////////////////////////////////////////////////////////////

const callErrorHandler = function ( message )
{
  currentErrorHandler ( message );
};


////////////////////////////////////////////////////////////////////////////////
//
//  Get the error handler.
//
////////////////////////////////////////////////////////////////////////////////

const getErrorHandler = function()
{
  return currentErrorHandler;
};


////////////////////////////////////////////////////////////////////////////////
//
//  Set the error handler.
//
////////////////////////////////////////////////////////////////////////////////

const setErrorHandler = function ( fun )
{
  const previousErrorHandler = currentErrorHandler;
  currentErrorHandler = ( ( "function" === typeof ( fun ) ) ? fun : defaultErrorHandler );
  return previousErrorHandler;
};


////////////////////////////////////////////////////////////////////////////////
//
//  The end of this module.
//
////////////////////////////////////////////////////////////////////////////////

module.exports = {
  callErrorHandler,
  getErrorHandler,
  setErrorHandler
};
